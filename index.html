<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Profissional de Vendas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<style>
:root{
  --bg:#0b1020;
  --sidebar:#0a0f1e;
  --card:#111827;
  --primary:#6366f1;
  --green:#22c55e;
  --red:#ef4444;
  --text:#e5e7eb;
  --muted:#9ca3af;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:var(--bg);
  color:var(--text);
}
.layout{
  display:grid;
  grid-template-columns:260px 1fr;
  min-height:100vh;
}
aside{
  background:var(--sidebar);
  padding:20px;
}
aside h2{
  color:var(--primary);
  margin-bottom:20px;
}
aside button{
  width:100%;
  background:#1f2937;
  color:white;
  border:none;
  padding:12px;
  border-radius:10px;
  margin-bottom:8px;
  text-align:left;
  cursor:pointer;
}
aside button:hover{background:var(--primary)}
main{padding:25px}
.section{display:none}
.section.active{display:block}

.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
}

/* INDICADORES CIRCULARES */
.circle-card{
  background:var(--card);
  padding:20px;
  border-radius:18px;
  text-align:center;
}
.circle{
  width:120px;
  height:120px;
  border-radius:50%;
  margin:10px auto;
  background:conic-gradient(var(--primary) 0%, #1f2937 0%);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  font-size:18px;
}
.circle.green{background:conic-gradient(var(--green) 0%, #1f2937 0%)}
.circle.red{background:conic-gradient(var(--red) 0%, #1f2937 0%)}

.card{
  background:var(--card);
  padding:20px;
  border-radius:16px;
}
input,select,button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin-top:10px;
}
button.primary{
  background:var(--primary);
  color:white;
}

table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:10px;
  border-bottom:1px solid #1f2937;
  text-align:center;
}
td button{
  padding:6px 10px;
  border-radius:6px;
  border:none;
  cursor:pointer;
}

@media(max-width:900px){
  .layout{grid-template-columns:1fr}
  aside{display:flex;gap:10px;overflow:auto}
}
</style>
</head>

<body>
<div class="layout">

<aside>
  <h2>Vendas</h2>
  <button onclick="show('painel')">üìä Painel</button>
  <button onclick="show('meta')">üéØ Meta do m√™s</button>
  <button onclick="show('vendas')">‚ûï Nova venda</button>
  <button onclick="show('historico')">üìÅ Hist√≥rico</button>
</aside>

<main>

<section id="painel" class="section active">

<div class="cards">
  <div class="circle-card">
    <h4>Meta do m√™s</h4>
    <div id="cMeta" class="circle">R$ 0</div>
  </div>
  <div class="circle-card">
    <h4>Total vendido</h4>
    <div id="cTotal" class="circle green">R$ 0</div>
  </div>
  <div class="circle-card">
    <h4>Falta p/ meta</h4>
    <div id="cFalta" class="circle red">R$ 0</div>
  </div>
  <div class="circle-card">
    <h4>Comiss√£o</h4>
    <div id="cComissao" class="circle green">R$ 0</div>
  </div>
</div>

<div class="card" style="margin-top:20px">
  <h3>Vendas ‚Äì Evolu√ß√£o</h3>
  <div id="grafico"></div>
</div>

</section>

<section id="meta" class="section">
<div class="card">
  <h3>Meta mensal</h3>
  <select id="mesMeta"></select>
  <input id="valorMeta" placeholder="Ex: 15.000,00">
  <button class="primary" onclick="salvarMeta()">Salvar meta</button>
</div>
</section>

<section id="vendas" class="section">
<div class="card">
  <h3>Nova venda</h3>
  <input id="cliente" placeholder="Nome completo do cliente">
  <input id="valorVenda" placeholder="Valor da venda">
  <select id="percentual">
    <option value="6">6%</option>
    <option value="5">5%</option>
    <option value="4">4%</option>
  </select>

  <h4 style="margin-top:15px">Produtos / Acess√≥rios</h4>
  <textarea id="itens" rows="4" placeholder="Ex:
Colch√£o Queen Azul - 2 un
Base Ba√∫ Branca - 1 un
Travesseiro Sleep - 4 un"></textarea>

  <button class="primary" onclick="adicionarVenda()">Adicionar venda</button>
</div>
</section>

<section id="historico" class="section">
<div class="card">
  <h3>Hist√≥rico do m√™s</h3>
  <table>
    <thead>
      <tr>
        <th>Data</th>
        <th>Cliente</th>
        <th>Itens</th>
        <th>Valor</th>
        <th>Comiss√£o</th>
      </tr>
    </thead>
    <tbody id="lista"></tbody>
  </table>
</div>
</section>

</main>
</div>

<script>
function num(v){return Number(v.replace(/\./g,"").replace(",","."))}
function moeda(v){return v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}

let dados = JSON.parse(localStorage.getItem("vendasPro")) || {
  metas:{},
  vendas:{}
};

let mesAtual = new Date().toISOString().slice(0,7);

function show(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function salvar(){
  localStorage.setItem("vendasPro",JSON.stringify(dados));
  atualizar();
}

function salvarMeta(){
  dados.metas[mesMeta.value]=num(valorMeta.value||"0");
  alert("Meta salva com sucesso");
  salvar();
}

function adicionarVenda(){
  if(!dados.vendas[mesAtual])dados.vendas[mesAtual]=[];
  let valor=num(valorVenda.value);
  let p=Number(percentual.value);
  dados.vendas[mesAtual].push({
    data:new Date(),
    cliente:cliente.value,
    itens:itens.value,
    valor,
    comissao:valor*p/100
  });
  cliente.value="";valorVenda.value="";itens.value="";
  salvar();
}

let grafico;
function atualizar(){
  mesMeta.innerHTML="";
  for(let i=1;i<=12;i++){
    let m=String(i).padStart(2,"0");
    mesMeta.innerHTML+=`<option value="${new Date().getFullYear()}-${m}">${m}/${new Date().getFullYear()}</option>`;
  }
  mesMeta.value=mesAtual;

  let vendas=dados.vendas[mesAtual]||[];
  let total=vendas.reduce((a,b)=>a+b.valor,0);
  let com=vendas.reduce((a,b)=>a+b.comissao,0);
  let meta=dados.metas[mesAtual]||0;

  cMeta.innerText=moeda(meta);
  cTotal.innerText=moeda(total);
  cFalta.innerText=moeda(Math.max(meta-total,0));
  cComissao.innerText=moeda(com);

  lista.innerHTML="";
  vendas.forEach(v=>{
    lista.innerHTML+=`
    <tr>
      <td>${v.data.toLocaleDateString("pt-BR")}</td>
      <td>${v.cliente}</td>
      <td style="white-space:pre-line">${v.itens}</td>
      <td>${moeda(v.valor)}</td>
      <td>${moeda(v.comissao)}</td>
    </tr>`;
  });

  if(grafico)grafico.destroy();
  grafico=new ApexCharts(document.querySelector("#grafico"),{
    chart:{height:300,type:"line"},
    series:[{name:"Vendas",data:vendas.map(v=>v.valor)}],
    xaxis:{categories:vendas.map((v,i)=>i+1)}
  });
  grafico.render();
}

atualizar();
</script>

</body>
</html>
