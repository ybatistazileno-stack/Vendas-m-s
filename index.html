<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Controle Profissional de Vendas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<style>
:root{
  --bg:#0b1020;--sidebar:#0a0f1e;--card:#111827;
  --primary:#6366f1;--green:#22c55e;
  --red:#ef4444;--text:#e5e7eb;--muted:#9ca3af;
}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial;background:var(--bg);color:var(--text)}
.layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}

aside{
  background:linear-gradient(180deg,#0a0f1e,#020617);
  padding:20px
}
aside h2{color:var(--primary);margin-bottom:25px}
aside button{
  width:100%;background:transparent;color:#c7d2fe;border:none;
  padding:14px;border-radius:12px;margin-bottom:8px;
  text-align:left;cursor:pointer;transition:.2s
}
aside button:hover{background:#1f2937}
aside button.active{background:var(--primary);color:#fff}

main{padding:25px}
.section{display:none}
.section.active{display:block}

/* HEADER PAINEL */
.painel-topo{
  display:flex;
  justify-content:flex-end;
  margin-bottom:15px;
}
.data-hora{
  text-align:right;
  font-size:14px;
  color:var(--muted);
}
.data-hora strong{
  display:block;
  font-size:16px;
  color:var(--text);
}

/* CARDS */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:15px
}
.card{
  background:var(--card);
  padding:20px;
  border-radius:18px
}
.valor{font-size:26px;font-weight:bold}
.green{color:var(--green)}
.red{color:var(--red)}
.muted{color:var(--muted)}

input,select,button{
  width:100%;padding:12px;border-radius:12px;border:none;margin-top:10px;
  font-size:16px
}
input,select{background:#f9fafb;color:#111827}
button.primary{background:var(--primary);color:white;cursor:pointer}

.alert{
  position:fixed;top:20px;right:20px;
  background:#16a34a;color:white;
  padding:14px 18px;border-radius:12px;display:none;z-index:999
}

table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #1f2937;vertical-align:top}
.item-chip{
  background:#1f2937;padding:6px 10px;border-radius:8px;
  font-size:13px;margin:3px 0
}

@media(max-width:900px){
  .layout{grid-template-columns:1fr}
  aside{display:flex;gap:10px;overflow:auto}
}
</style>
</head>

<body>

<div class="alert" id="alerta">Salvo com sucesso</div>

<div class="layout">

<aside>
  <h2>Vendas</h2>
  <button onclick="show('painel',this)" class="active">üìä Painel</button>
  <button onclick="show('meta',this)">üéØ Meta do m√™s</button>
  <button onclick="show('vendas',this)">‚ûï Nova venda</button>
  <button onclick="show('historico',this)">üìÅ Hist√≥rico</button>
</aside>

<main>

<section id="painel" class="section active">

  <!-- DATA / HORA -->
  <div class="painel-topo">
    <div class="data-hora">
      <strong id="mesPainel"></strong>
      <span id="dataHora"></span>
    </div>
  </div>

  <div class="cards">
    <div class="card"><div class="muted">Total vendido</div><div id="totalVendido" class="valor"></div></div>
    <div class="card"><div class="muted">Falta para meta</div><div id="faltaMeta" class="valor red"></div></div>
    <div class="card"><div class="muted">Comiss√£o</div><div id="totalComissao" class="valor green"></div></div>
  </div>

  <div class="cards" style="margin-top:20px">
    <div class="card"><h4>Resumo do m√™s</h4><div id="donut1"></div></div>
  </div>

</section>

<!-- RESTANTE DO SITE INTACTO -->
<!-- META / VENDAS / HIST√ìRICO permanecem exatamente como estavam -->

</main>
</div>

<script>
const meses=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];

function moeda(v){return v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}
function num(v){return Number(v.replace(/\./g,"").replace(",","."))}

let dados=JSON.parse(localStorage.getItem("controleVendas"))||{painel:"",meses:{}};

function atualizarDataHora(){
  const agora=new Date();
  document.getElementById("dataHora").innerText =
    agora.toLocaleDateString("pt-BR")+" ‚Ä¢ "+agora.toLocaleTimeString("pt-BR");
}
setInterval(atualizarDataHora,1000);
atualizarDataHora();

function atualizarPainelInfo(){
  const [a,m]=dados.painel.split("-");
  document.getElementById("mesPainel").innerText =
    meses[Number(m)-1]+" / "+a;
}

let d1;
function atualizar(){
  let mes=dados.meses[dados.painel];
  let total=mes.vendas.reduce((a,b)=>a+b.valor,0);
  let com=mes.vendas.reduce((a,b)=>a+b.com,0);

  totalVendido.innerText=moeda(total);
  faltaMeta.innerText=moeda(Math.max(mes.meta-total,0));
  totalComissao.innerText=moeda(com);

  atualizarPainelInfo();

  if(d1)d1.destroy();
  d1=new ApexCharts(donut1,{
    chart:{type:"donut"},
    series:[total,com],
    labels:["Vendido","Comiss√£o"]
  });
  d1.render();
}
</script>

</body>
</html>
